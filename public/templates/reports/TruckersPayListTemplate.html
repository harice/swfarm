<div class="col-md-12">    
    <div class="header">
        <div class="row margin-top-0">
            <div class="col-md-12">
                <h2>
                    Trucking Statement
                    <div class="btn-group pull-right">
                        <button data-toggle="dropdown" class="btn btn-success btn-sm btn-rad dropdown-toggle" type="button">
                            Export <span class="caret"></span>
                        </button>
                        <ul role="menu" class="dropdown-menu">
                            <li><a href="<%= export_pdf_url %>" target="_blank">Adobe PDF (*.pdf)</a></li>
                            <li><a href="<%= export_xlsx_url %>">Excel (*.xlsx)</a></li>
                            <li><a href="<%= export_xls_url %>">Excel (*.xls)</a></li>
                            <li><a href="<%= export_csv_url %>">Excel (*.csv)</a></li>
                        </ul>
                    </div>
                </h2>
                <h5><%= cur_date %></h5>
            </div>
        </div>
        <div class="row margin-top-0">
            <div class="col-md-12 text-center">
                <h5>                                                                   
                    <strong><%= date_from %></strong> to  <strong><%= date_to %></strong>
                </h5>
            </div>
        </div>
        <div class="row margin-top-0">
            <div class="col-md-12">
                <h3>
                    Truck Number
                    <strong>
                        <%= truckers.get('truck').trucknumber %>
                    </strong>
            </div>            
        </div>
    </div>    
    <% if (truckers.get('summary').total_transactions) { %>      
    <div class="content">        
        <div class="content-inner table-responsive">
            <table id="operator-list" class="table table-bordered">
                <thead class="no-border">
                    <tr>         
                        <th><strong>Order No.</strong></th>
                        <th><strong>Date</strong></th>
                        <th><strong>Origin</strong></th>
                        <th><strong>Destination</strong></th>
                        <th><strong>Bale</strong></th>
                        <th><strong>Net</strong></th>
                        <th><strong>Tons</strong></th>
                        <th><strong>Rate</strong></th>
                        <th><strong>Total</strong></th>
                        <th><strong>Rent</strong></th>                     
                    </tr>
                </thead>
                <tbody class="no-border-y">               
                    <% 
                        var total_bales = 0;
                        var total_tons = 0;
                        _.each(truckers.get('transactions'),function(transaction){ 
                        var tons = convertLbsToTons(transaction.pounds);
                        var net = tons * 2;
                        var total = tons * transaction.truckingrate;
                        var rent = total * .1;
                        var amount = parseFloat(transaction.loader_origin_fee) + parseFloat(transaction.loader_destination_fee);
                        total_bales += transaction.bales;
                        (transaction.loading_type=='1') ? total_tons += tons : total_tons += 0;
                    %>    
                        <tr>   
                            <td><%= transaction.order_number %> </td>                                              
                            <td>
                                <% 
                                    var d = Date.parse(transaction.created_at);
                                    if (isNaN(d)==false)
                                    {
                                        var d = new Date(transaction.created_at), 
                                        fragments = [                                
                                            d.getMonth() + 1,
                                            d.getDate(),
                                            d.getFullYear()
                                        ]; 
                                        print(fragments.join('/'));

                                    }     
                                    else {
                                        d = (transaction.created_at).split(' ')[0];
                                        var t = d.split('-');
                                        print(t[1]+'/'+t[2]+'/'+t[0]);
                                    }                  
                                %>
                            </td>
                            <td><%= transaction.section_origin_name %></td>
                            <td><%= transaction.section_destination_name %></td>                        
                            <td><%= transaction.bales %></td> 
                            <td><%= net.toFixed(2) %></td>
                            <td><%= tons %></td>
                            <td>$ <%= numberFormat(transaction.truckingrate) %></td>
                            <td>$ <%= numberFormat(total) %></td>
                            <td>$ <%= numberFormat(rent) %></td>                                          
                        </tr>   
                    <%}); %>                     
                </tbody>                
            </table>  

            <table class="table table-bordered" style="width:50%">
                <thead>
                    <tr>
                        <th><strong>Order No.</strong></th>
                        <th><strong>Ticket No.</strong></th>
                        <th><strong>Type</strong></th>
                        <th><strong>Loader</strong></th>
                        <th><strong>Amount</strong></th>
                    </tr>
                </thead>
                <tbody>
                    <%                        
                    _.each(truckers.get('truck_loads'),function(load){                        
                    %>
                    <tr>
                        <td><%= load.order_number %> </td>
                        <td><%= load.receipt_no %> </td>
                        <td><%= load.type %></td>  
                        <td><%= load.loader %></td>
                        <td> 
                            <%
                                if(load.amount != null) {
                                    print('$ ' +numberFormat(load.amount));
                                }          
                                else {
                                    
                                }                      
                            %>
                        </td>  
                    </tr>
                    <%}); %>    
                </tbody>
            </table>

            <table class="table-bordered" style="width:30%">
                <thead class="no-border">
                    <tr>
                        <td colspan="2" align="center"><strong>SUMMARY</strong></td>
                    </tr>
                </thead>
                <tbody class="no-border-y">
                    <tr>
                        <td>
                            Total Bales: 
                        </td>
                        <td>
                            <strong><%= total_bales %></strong>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            Total Tons: 
                        </td>
                        <td>
                            <strong><%= numberFormatTons(total_tons) %></strong>  
                        </td>
                    </tr>
                    <tr>
                        <td>
                            Total Hauling: 
                        </td>
                        <td>
                            <strong>$ <%= numberFormat(truckers.get('summary').total_hauling_fee) %></strong>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            Total Admin Fee: 
                        </td>
                        <td>
                            <strong>$ <%= numberFormat(truckers.get('summary').total_admin_fee) %></strong>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            Total Fuel Fee: 
                        </td>
                        <td>
                            <strong>$ <%= numberFormat(truckers.get('summary').total_fuel_fee) %></strong>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            Total Trailer Rent: 
                        </td>
                        <td>
                            <strong>$ <%= numberFormat(truckers.get('summary').total_trailer_rent) %></strong>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            Total Loading: 
                        </td>
                        <td>
                            <strong>$ <%= numberFormat(truckers.get('summary').total_loading_fee) %></strong>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            Total Statement: 
                        </td>
                        <td>
                            <strong>$ <%= numberFormat(truckers.get('summary').total_statement) %></strong>
                        </td>
                    </tr>
                </tbody>
            </table>


        </div>
    </div>
    <% } else { %>
    <div class="content">
        <p>No transactions found.</p>
    </div>
    <% } %>
</div>