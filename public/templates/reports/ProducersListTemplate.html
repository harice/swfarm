<div class="col-md-12">    
    <div class="header">
        <div class="row margin-top-0">
            <div class="col-md-6">
                <h3>
                    Producer Name:
                    <strong>
                        <%= producers.get('producer').name %>
                    </strong>
                </h3> 
            </div>
            <div class="col-md-6">
                <h3>
                    Address:
                    <strong>
                        <%= producers.get('producer').address[0].street %>, <%= producers.get('producer').address[0].city %>
                    </strong>
                </h3> 
            </div>         
        </div>
    </div>
    <% if (producers.get('summary').total_transactions) { %>  
    <div class="content">        
        <div class="content-inner table-responsive">
            <%
                var total_amount = 0; 
           
                _.each(producers.get('transactions'),function(transaction){ 
                    var tons = transaction.pounds * .0005;
                    var net_weight = tons * 2;        
                    var amount = tons * transaction.unitprice;
                    total_amount += amount;    
            %>
            <h6>Location: <strong><%= transaction.storagelocation_name %></strong></h6>
            <table id="operator-list" class="table-bordered table">
                <thead class="no-border">
                    <tr>
                        <th>Date</th>
                        <th>Invoice #</th>
                        <th>Weight Ticket</th>
                        <th>Bales</th>
                        <th>Net Weight</th>
                        <th>Tons</th>
                        <th>Price</th>
                        <th>Amount</th>
                    </tr>
                </thead>
                <tbody class="no-border-y">                          
                    <tr>                        
                        <td>
                            
                            <% 
                                var d = Date.parse(transaction.created_at);
                                if (isNaN(d)==false)
                                {
                                    var d = new Date(transaction.created_at), 
                                    fragments = [                                
                                        d.getMonth() + 1,
                                        d.getDate(),
                                        d.getFullYear()
                                    ]; 
                                    print(fragments.join('/'));

                                }     
                                else {
                                    d = (transaction.created_at).split(' ')[0];
                                    var t = d.split('-');
                                    print(t[1]+'/'+t[2]+'/'+t[0]);
                                }                  
                            %>
                        </td>
                        <td></td>
                        <td><%= transaction.weightTicketNumber %></td>
                        <td><%= transaction.bales %></td>
                        <td><%= net_weight.toFixed(2) %></td>
                        <td><%= tons.toFixed(2) %></td>
                        <td><%= transaction.unitprice %></td>
                        <td><%= amount.toFixed(4) %></td>
                    </tr>
                    <tr>
                        <td colspan="8">
                            Load Count: 
                        </td>
                    </tr>    
                
                </tbody>               
            </table>
            <%}); %>   
            <table class="table-bordered">
                <thead class="no-border">
                    <tr>
                        <td colspan="4"><strong>SUMMARY</strong></td>
                    </tr>
                </thead>
                <tbody class="no-border-y">
                    <tr>
                        <td width="25%">
                            <strong>Total Loads:</strong> <%= (producers.get('summary').total_transactions) %>
                        </td>
                        <td width="25%">
                            Contract Total Amount: <strong><%= total_amount %></strong>
                        </td>
                        <td width="25%">
                            Less Scale Fees: <strong></strong>
                        </td>
                        <td width="25%">
                            <strong>Total Amount Due:</strong>
                        </td>
                    </tr>
                </tbody>
            </table>                       
        </div>        
    </div>
    <% } else { %>
    <div class="content">
        <p>No transactions found.</p>
    </div>
    <% } %>
</div>